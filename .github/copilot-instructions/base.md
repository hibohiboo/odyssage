# Copilot 基本指示書

## ソフトウェア設計

- 単一責任の原則に従う。クラス・関数は１つの役割のみを実行すること
- 依存性逆転の原則に従う。外部の依存関係はインターフェースを介して注入すること
- KISS原則に従う。可能な限り複雑さを避け、シンプルで誰にでも理解しやすいアーキテクチャとすること
- YAGNI原則に従う。今必要ないものは作らないこと
- DRY原則に従う。無駄な重複は避けること。ただし、過度な共通化はしないこと

## コーディングスタイル
- 条件文ではネストを避け、コードの可読性を高めるために早期リターンを使用すること
- クラス及び関数には適切なドキュメントコメントを追加する。各関数やクラスにはその目的や使用方法を説明するコメントを追加すること
- 関数の宣言位置は使用箇所より前とすること
- コードを直訳はコメントに書かず、何故そのコードにしたのかを記載する
  - bad: `setDefaultTimeout(60 * 1000);` に `// タイムアウトを60秒に設定`
  - good: `setDefaultTimeout(60 * 1000);` に `// 時間がかかるテストなのでタイムアウトを延長 （デフォルトは5秒）`

## リポジトリ構造

```
odysseyage/
├── apps/
│   ├── backend/             # バックエンドアプリケーション
│   ├── frontend/            # フロントエンドアプリケーション
│   │   ├── src/
│   │   │   ├── app/         # グローバルなアプリケーション設定（ルート、状態管理など）
│   │   │   ├── entities/    # ドメインエンティティ（Character, Scenarioなど）
│   │   │   ├── features/    # ドメイン機能（キャラクター管理、シナリオ管理など）
│   │   │   ├── pages/       # ページコンポーネント
│   │   │   ├── shared/      # 共通コンポーネント、ユーティリティ
│   │   │   └── widgets/     # UIウィジェット（ヘッダー、フッターなど）
├── packages/
│   ├── schema/              # バリデーションスキーマ。データスキーマ。
│   ├── database/            # データベーススキーマ（インフラ層）。永続化層アダプタ（リポジトリの実装）
│   ├── ui/                  # UIコンポーネントライブラリ
│   ├── lib/                 # 共通ユーティリティ
│   ├── bdd-e2e-test/        # ふるまい駆動のe2eテスト
│   ├── typescript-config    # tsconfig設定
│   └── eslint-config-custom # eslint設定
├── docs/                    # 設計ドキュメント
```

## フォルダ階層
- フォルダ名は小文字を用いる

## 共通利用ライブラリ
用途|ライブラリ
--|--
テスト|vitest
言語|typescript
